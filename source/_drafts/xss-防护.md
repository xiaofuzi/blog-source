title: 网络安全之xss
date: 2016-03-05 23:30:59
tags: [xss]
---

### 什么事XSS?

XSS(跨站脚本攻击)是一种web应用程序的漏洞，当来自用户的不可信数据被应用程序在没有验证以及反射回浏览器而没有进行编码或转义的情况下进行处理，导致浏览器引擎执行了代码。

### 如何防护？

1.验证输入并且基于语境和按照正确的顺序转义不可信的数据

* HTML中的字符串转义，使用相应的字符实体代替

```html
&---&amp;
<---&lt;
>---&gt;
"---&quot;
`---&#x60;
'---&#x27;
/---&#x2F;
```

* HTML属性中的字符串进行转义
* HTML属性中的URL路径
* HTML风格属性和CSS中的字符串
* JavaScript中的HTML

2.使用utf-8作为默认编码以及content为"text/html"类型

3.使用推荐的HTTP响应头
	* X-XSS-Protection: 1;mode=block ---该响应头会开启浏览器的xss过滤器
	* X-Frame-Options: deny---该响应头禁止页面被加载到框架
	* X-Content-Type-Options: nosniff---该响应头会禁止浏览器做MIMEtype嗅探


### 有效实施内容安全策略

CSP或内容安全策略将在浏览器上强制执行策略，指定浏览器应该加载哪些资源，浏览器应该从哪里加载资源以及通过指令进行资源定义，指定资源加载行为。
